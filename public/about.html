<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gi·ªõi Thi·ªáu - Web Server</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>üöÄ Web Server Tƒ©nh - ƒêa Lu·ªìng</h1>
            <p class="subtitle">S·ª≠ d·ª•ng ThreadPoolExecutor ƒë·ªÉ x·ª≠ l√Ω nhi·ªÅu client ƒë·ªìng th·ªùi</p>
        </div>
    </header>

    <nav class="navbar">
        <div class="container">
            <ul class="nav-menu">
                <li><a href="/">Trang Ch·ªß</a></li>
                <li><a href="/about.html" class="active">Gi·ªõi Thi·ªáu</a></li>
            </ul>
        </div>
    </nav>

    <main>
        <div class="container">
            <section class="about-intro">
                <h2>V·ªÅ D·ª± √Ån N√†y</h2>
                <p>
                    D·ª± √°n n√†y l√† m·ªôt web server tƒ©nh ƒë∆∞·ª£c vi·∫øt b·∫±ng Python t·ª´ ƒë·∫ßu, 
                    kh√¥ng s·ª≠ d·ª•ng b·∫•t k·ª≥ framework web n√†o nh∆∞ Flask hay Django. 
                    Server s·ª≠ d·ª•ng Socket API ·ªü m·ª©c th·∫•p (low-level) v√† ThreadPoolExecutor 
                    ƒë·ªÉ x·ª≠ l√Ω nhi·ªÅu client ƒë·ªìng th·ªùi.
                </p>
            </section>

            <section class="architecture">
                <h2>Ki·∫øn Tr√∫c H·ªá Th·ªëng</h2>
                
                <h3>1. Server Architecture</h3>
                <div class="info-box">
                    <p>
                        Server ƒë∆∞·ª£c x√¢y d·ª±ng tr√™n n·ªÅn t·∫£ng Socket API c·ªßa Python. 
                        N√≥ l·∫Øng nghe tr√™n m·ªôt port (m·∫∑c ƒë·ªãnh 8000) v√† ch·∫•p nh·∫≠n c√°c k·∫øt n·ªëi t·ª´ clients.
                    </p>
                    <pre><code>[Client] --HTTP Request--&gt; [Server Socket]
         &lt;--HTTP Response-- [ThreadPoolExecutor]
                    </code></pre>
                </div>

                <h3>2. Threading Model</h3>
                <div class="info-box">
                    <p>
                        M·ªói client connection ƒë∆∞·ª£c x·ª≠ l√Ω b·ªüi m·ªôt thread ri√™ng t·ª´ ThreadPoolExecutor. 
                        ƒêi·ªÅu n√†y cho ph√©p server x·ª≠ l√Ω nhi·ªÅu requests ƒë·ªìng th·ªùi m√† kh√¥ng block.
                    </p>
                    <ul>
                        <li><strong>Max Workers:</strong> S·ªë thread t·ªëi ƒëa (c·∫•u h√¨nh trong config.json)</li>
                        <li><strong>Queue Management:</strong> Requests ƒë∆∞·ª£c queue n·∫øu t·∫•t c·∫£ threads b·∫≠n</li>
                        <li><strong>Graceful Shutdown:</strong> Ch·ªù t·∫•t c·∫£ threads xong tr∆∞·ªõc khi d·ª´ng</li>
                    </ul>
                </div>

                <h3>3. HTTP Processing Flow</h3>
                <div class="info-box">
                    <ol>
                        <li>Client k·∫øt n·ªëi ƒë·∫øn server</li>
                        <li>Server recv HTTP request t·ª´ socket</li>
                        <li>Parse request line (method, path, version)</li>
                        <li>Validate path (ngƒÉn path traversal)</li>
                        <li>Resolve ƒë·∫øn file trong public/ directory</li>
                        <li>ƒê·ªçc file v√† x√°c ƒë·ªãnh MIME type</li>
                        <li>G·ª≠i HTTP response v·ªõi headers v√† content</li>
                        <li>ƒê√≥ng connection</li>
                    </ol>
                </div>
            </section>

            <section class="features-detail">
                <h2>Chi Ti·∫øt C√°c T√≠nh NƒÉng</h2>

                <h3>üîí B·∫£o M·∫≠t - Path Traversal Prevention</h3>
                <div class="feature-detail">
                    <p>
                        Server ngƒÉn ch·∫∑n c√°c attack c·ªë g·∫Øng truy c·∫≠p file ngo√†i th∆∞ m·ª•c public/ 
                        b·∫±ng c√°ch s·ª≠ d·ª•ng normalized paths:
                    </p>
                    <pre><code># Reject:
GET /../../../etc/passwd
GET /..%2f..%2fetc%2fpasswd

# Accept:
GET /index.html
GET /about.html
                    </code></pre>
                </div>

                <h3>üìä MIME Type Detection</h3>
                <div class="feature-detail">
                    <p>Server t·ª± ƒë·ªông x√°c ƒë·ªãnh MIME type d·ª±a tr√™n file extension:</p>
                    <table class="info-table">
                        <tr><td>.html</td><td>text/html; charset=utf-8</td></tr>
                        <tr><td>.css</td><td>text/css; charset=utf-8</td></tr>
                        <tr><td>.js</td><td>application/javascript; charset=utf-8</td></tr>
                        <tr><td>.json</td><td>application/json; charset=utf-8</td></tr>
                        <tr><td>.png, .jpg, .gif</td><td>image/...</td></tr>
                        <tr><td>.pdf</td><td>application/pdf</td></tr>
                    </table>
                </div>

                <h3>üìù Logging Thread-Safe</h3>
                <div class="feature-detail">
                    <p>
                        M·ªói log entry ƒë∆∞·ª£c b·∫£o v·ªá b·∫±ng threading.Lock ƒë·ªÉ tr√°nh race conditions. 
                        Logs ƒë∆∞·ª£c ghi v√†o:
                    </p>
                    <ul>
                        <li>File: logs/server.log (rotating, max 10MB)</li>
                        <li>Console: Realtime output</li>
                    </ul>
                </div>

                <h3>üõë Graceful Shutdown</h3>
                <div class="feature-detail">
                    <p>
                        Khi nh·∫•n Ctrl+C, server:
                    </p>
                    <ol>
                        <li>B·∫Øt SIGINT signal</li>
                        <li>D·ª´ng accept k·∫øt n·ªëi m·ªõi</li>
                        <li>ƒê·ª£i t·∫•t c·∫£ threads ho√†n th√†nh (v·ªõi timeout)</li>
                        <li>ƒê√≥ng t·∫•t c·∫£ resources</li>
                    </ol>
                </div>
            </section>

            <section class="code-structure">
                <h2>C·∫•u Tr√∫c Code</h2>
                
                <h3>server.py</h3>
                <div class="code-block">
                    <p><strong>Classes:</strong></p>
                    <ul>
                        <li><code>ThreadSafeLogger</code> - Logger v·ªõi thread-safe protection</li>
                        <li><code>HTTPServer</code> - Main server class</li>
                    </ul>
                    <p><strong>Key Methods:</strong></p>
                    <ul>
                        <li><code>start()</code> - Main server loop</li>
                        <li><code>_handle_client()</code> - X·ª≠ l√Ω m·ªói client connection</li>
                        <li><code>_is_safe_path()</code> - Validate path</li>
                        <li><code>_get_mime_type()</code> - Detect MIME type</li>
                        <li><code>shutdown()</code> - Graceful shutdown</li>
                    </ul>
                </div>

                <h3>client_test.py</h3>
                <div class="code-block">
                    <p><strong>Classes:</strong></p>
                    <ul>
                        <li><code>HTTPClient</code> - Test client class</li>
                    </ul>
                    <p><strong>Key Methods:</strong></p>
                    <ul>
                        <li><code>send_request()</code> - G·ª≠i m·ªôt request</li>
                        <li><code>test_concurrent()</code> - Test nhi·ªÅu requests ƒë·ªìng th·ªùi</li>
                        <li><code>_print_results()</code> - Hi·ªÉn th·ªã k·∫øt qu·∫£ chi ti·∫øt</li>
                    </ul>
                </div>
            </section>

            <section class="performance">
                <h2>Hi·ªáu Su·∫•t</h2>
                <div class="info-box">
                    <p>
                        V·ªõi ThreadPoolExecutor, server c√≥ th·ªÉ x·ª≠ l√Ω h√†ng ch·ª•c requests ƒë·ªìng th·ªùi. 
                        Hi·ªáu su·∫•t ph·ª• thu·ªôc v√†o:
                    </p>
                    <ul>
                        <li><strong>max_threads:</strong> S·ªë threads t·ªëi ƒëa (default 10)</li>
                        <li><strong>File size:</strong> K√≠ch th∆∞·ªõc file ƒë∆∞·ª£c serve</li>
                        <li><strong>Network bandwidth:</strong> BƒÉng th√¥ng m·∫°ng</li>
                        <li><strong>Disk I/O:</strong> T·ªëc ƒë·ªô ƒë·ªçc disk</li>
                    </ul>
                    <p>
                        D√πng client_test.py ƒë·ªÉ benchmark v√† xem throughput c·ªßa server b·∫°n.
                    </p>
                </div>
            </section>

            <section class="future-improvements">
                <h2>H∆∞·ªõng Ph√°t Tri·ªÉn Trong T∆∞∆°ng Lai</h2>
                <ul>
                    <li>HTTP/2 v√† HTTP/3 support</li>
                    <li>SSL/TLS encryption</li>
                    <li>Range requests (cho file l·ªõn)</li>
                    <li>Compression (gzip, brotli)</li>
                    <li>Caching headers (ETag, Last-Modified)</li>
                    <li>Virtual hosting</li>
                    <li>WebSocket support</li>
                </ul>
            </section>

            <section class="cta">
                <h2>Quay L·∫°i Trang Ch·ªß</h2>
                <p><a href="/" class="btn">‚Üê Trang Ch·ªß</a></p>
            </section>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 Web Server Project. Made with ‚ù§Ô∏è in Python</p>
        </div>
    </footer>
</body>
</html>
